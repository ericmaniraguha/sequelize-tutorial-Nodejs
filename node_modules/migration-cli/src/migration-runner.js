'use strict';
const readSql = require('./sql-reader');

const buildMigrations = (scripts) => Object.keys(scripts).reduce(
    (migrations, action) => Object.assign(migrations, {
        [action]: ({ sequelize }, Sequelize) => sequelize
          .query(scripts[action])
      }),
    {})

module.exports = (filename, dirname) => (
    console.log('sql', readSql(filename, dirname)),
    buildMigrations(
        readSql(filename, dirname)
    )
);
