'use strict';
var path = require('path');
var fs = require('fs');

var readFile = (dirname, migrationName) => 
    (action) => fs.readFileSync(
        path.resolve(dirname, migrationName.replace(/\.[^/.]+$/, `.${action}.sql`)),
        'utf8',
    );

module.exports = function(filename, dirname) {
    var migrationName = path.basename(filename);
    var read = readFile(dirname, migrationName);
    return {
        up: read('up'),
        down: read('down')
    };
};